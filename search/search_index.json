{"config":{"lang":["en"],"separator":"[\\s\\-]+","pipeline":["stopWordFilter"]},"docs":[{"location":"","title":"Welcome","text":"<p>For full documentation visit mkdocs.org.</p>"},{"location":"#commands","title":"Commands","text":"<ul> <li><code>mkdocs new [dir-name]</code> - Create a new project.</li> <li><code>mkdocs serve</code> - Start the live-reloading docs server.</li> <li><code>mkdocs build</code> - Build the documentation site.</li> <li><code>mkdocs -h</code> - Print help message and exit.</li> </ul>"},{"location":"#project-layout","title":"Project layout","text":"<pre><code>mkdocs.yml    # The configuration file.\ndocs/\n    index.md  # The documentation homepage.\n    ...       # Other markdown pages, images and other files.\n</code></pre>"},{"location":"Managed%20Azure%20AD%20B2C/test2/","title":"Welcome to MkDocs 2","text":"<p>For full documentation visit mkdocs.org.</p>"},{"location":"Managed%20Azure%20AD%20B2C/test2/#commands","title":"Commands","text":"<ul> <li><code>mkdocs new [dir-name]</code> - Create a new project.</li> <li><code>mkdocs serve</code> - Start the live-reloading docs server.</li> <li><code>mkdocs build</code> - Build the documentation site.</li> <li><code>mkdocs -h</code> - Print help message and exit.</li> </ul>"},{"location":"Managed%20Azure%20AD%20B2C/test2/#project-layout","title":"Project layout","text":"<pre><code>mkdocs.yml    # The configuration file.\ndocs/\n    index.md  # The documentation homepage.\n    ...       # Other markdown pages, images and other files.\n</code></pre>"},{"location":"Security%20Posture%20Portal/howtocancel/","title":"How to cancel subscription of the Security Posture Portal","text":"<p>To cancel your subscription of the portal is very easy and are done through your Azure portal. Follow the steps below to cancel at any point.</p> <ol> <li> <p>Go to the Azure portal.</p> </li> <li> <p>In the global search box at the top of the page, enter SaaS and then under Services, select SaaS. Shortcut here</p> </li> </ol> <p></p> <ol> <li> <p>Find the SaaS offering named <code>Security Posture for Microsoft 365</code> and click it.</p> </li> <li> <p>Choose \"Cancel Subscription\" on the SaaS app and follow the screen instructions.</p> </li> </ol> <p></p> <p>!!! note</p> <pre><code>If you have any issues contact us on assistance@amestofortytwo.com .\n</code></pre>"},{"location":"Security%20Posture%20Portal/howtosetup/","title":"How to setup/onboard the portal from Azure marketplace","text":"<p>This is an detailed description of how to setup our Security Posture Portal from Azure Marketplace. The steps are pritty much easy to understand but we have documented every step here in this guide.</p>"},{"location":"Security%20Posture%20Portal/howtosetup/#setup-through-azure-marketplace","title":"Setup through Azure Marketplace","text":""},{"location":"Security%20Posture%20Portal/howtosetup/#1-go-to-our-azure-marketplace-product-page","title":"1. Go to our Azure Marketplace Product page","text":""},{"location":"Security%20Posture%20Portal/howtosetup/#2-click-get-it-now","title":"2. Click <code>Get it now</code>","text":""},{"location":"Security%20Posture%20Portal/howtosetup/#3-fill-out-contact-details-and-click-continue","title":"3. Fill out contact details and click <code>Continue</code>","text":""},{"location":"Security%20Posture%20Portal/howtosetup/#4-you-are-now-taken-to-the-azure-portal-choose-standard-on-the-plan-dropdown-and-click-subscribe","title":"4. You are now taken to the Azure portal. Choose <code>Standard</code> on the Plan dropdown and click <code>Subscribe</code>","text":""},{"location":"Security%20Posture%20Portal/howtosetup/#5-now-take-the-appropiate-actions-on-the-following","title":"5. Now take the appropiate actions on the following:","text":"<p>!!! note</p> <pre><code>To be able to add the Security Posture Portal to your tenant you need at least ``Contributor`` access\n</code></pre> <ul> <li>Choose which Azure subscription you would like to add the app to.</li> <li>Choose which Resource group the app should live in. Choose \"New\" if you dont have any.</li> <li>Give the app an appropiate name <code>Amesto Fortytwo Security Posture Portal</code></li> <li>Choose <code>On</code> on Recurring billing.</li> </ul> <p></p>"},{"location":"Security%20Posture%20Portal/howtosetup/#6-when-you-are-ready-click-review-subscribe-to-start-the-setup-of-the-portal","title":"6. When you are ready click <code>Review + subscribe</code> to start the setup of the portal.","text":""},{"location":"Security%20Posture%20Portal/howtosetup/#7-the-setup-will-take-a-couple-of-minutes-when-its-done-you-will-be-asked-to-go-to-the-publisher-site-to-finish-setup","title":"7. The setup will take a couple of minutes. When its done you will be asked to <code>Go to the publisher site to finish setup</code>.","text":""},{"location":"Security%20Posture%20Portal/howtosetup/#8-you-are-now-being-redirected-to-our-onboarding-page","title":"8. You are now being redirected to our onboarding page.","text":""},{"location":"Security%20Posture%20Portal/howtosetup/#9-first-you-need-to-approve-our-single-signon-application-this-is-to-that-you-can-access-the-portal-with-your-own-microsoft-365-account","title":"9. First you need to Approve our Single Signon Application. This is to that you can access the portal with your own Microsoft 365 account.","text":""},{"location":"Security%20Posture%20Portal/howtosetup/#10-you-now-need-to-install-our-app-amesto-fortytwo-portal","title":"10. You now need to install our app <code>Amesto Fortytwo Portal</code>","text":"<p>This app is required for us to read the configuration in your tenant. </p> <p>!!! warning</p> <pre><code>Our app only has Read permissions for configurations elements and we will not every be able to reads any of your users data.\n</code></pre> <p></p>"},{"location":"Security%20Posture%20Portal/howtosetup/#11-setup-exchange-and-teams-permissions","title":"11. Setup Exchange and Teams permissions","text":"<p>Follow the guide on the onboarding steps.</p>"},{"location":"Security%20Posture%20Portal/howtosetup/#12-give-yourself-and-users-permissions","title":"12. Give yourself and users permissions","text":"<p>Follow the guide on the onboarding steps.</p>"},{"location":"Security%20Posture%20Portal/howtosetup/#13-navigate-to-the-portal","title":"13. Navigate to the portal","text":"<p>Follow the guide on the onboarding steps.</p> <p>!!! note</p> <pre><code>If you have any issues contact us on assistance@amestofortytwo.com\n</code></pre>"},{"location":"Security%20Posture%20Portal/main/","title":"Welcome to Amesto Fortytwo Security Posture portal for Microsoft 365","text":""},{"location":"Self%20Hosted%20Runners/azuredevops-managedapp/","title":"Azure DevOps self hosted runners -","text":"<p>This documentation shows you how to use our Azure Managed Application to create an Azure DevOps self hosted runner Virtual Machine Scale Set (VMSS).</p>"},{"location":"Self%20Hosted%20Runners/azuredevops-managedapp/#todo","title":"TODO","text":""},{"location":"Self%20Hosted%20Runners/azuredevops-vmss/","title":"Configuring Azure DevOps self hosted runners using VMSS","text":"<p>This documentation shows you how to configure an Azure Virtual Machine Scale Set (VMSS) with the latest Self Hosted Runner image, and connecting the VMSS as an agent pool in Azure DevOps. Using a VMSS in Azure DevOps gives you the ability to automatically increase and decrease the number of active runners dynamically based on pipeline demand. Additionally, the VMSS will always create instances based on the latest runner image published to the Azure Marketplace, so you will never need to worry about updating the operating system and toolkit - just like the Microsoft Hosted Runners!</p> <p>To configure, you need to follow the three steps below:</p> <ol> <li>Configuring the Virtual Machine Scale Set</li> <li>Adding the VMSS as an Azure DevOps Agent Pool</li> <li>Testing the self hosted runner (Not really required)</li> </ol>"},{"location":"Self%20Hosted%20Runners/azuredevops-vmss/#step-1-configuring-the-virtual-machine-scale-set","title":"Step 1 - Configuring the Virtual Machine Scale Set","text":"<p>Note: If you do not want to handle the creation of the VMSS manually, you can use our Azure Managed Application instead.</p> <p>Start by going to the Azure Portal and click +Create a resource. </p> <p></p> <p>Search for Virtual Machine Scale Set, click on the result and click Create</p> <p></p>"},{"location":"Self%20Hosted%20Runners/azuredevops-vmss/#basics","title":"Basics","text":"<ul> <li>Project details<ul> <li>Subscription - A subscription you have contributor access to<ul> <li>Resource group - A new or existing resource group</li> </ul> </li> </ul> </li> <li>Scale set details<ul> <li>Virtual machine scale set name - The name of the scale set itself. Cannot be changed after deployment, but everything is stateless, so you can simply deploy a new scale set if needed.</li> <li>Region - The region where you want your runners to be located</li> <li>Availability zone - Configure to None in order to allow for a cluster with few running instances</li> </ul> </li> <li>Orchestration<ul> <li>Orchestration mode - Configure to Uniform, as we will be running only a single image and runner type</li> <li>Security type - Standard is the only supported for our image currently</li> </ul> </li> <li> <p>Instance details</p> <ul> <li>Image - Locate the Amesto Fortytwo Self Hosted Runner for Azure DevOps image and select whether you want an Ubuntu or Windows based runner:</li> </ul> <p></p> <ul> <li>Run with Azure Spot discount - Only select this if you know how to handle spot, and if your pipelines can tolerate evictions</li> <li>Size - Choose the virtual machine size you want to run the runners as</li> <li>Administrator account</li> <li>Configure an administrator account for you virtual machines</li> </ul> </li> </ul> <p> </p>"},{"location":"Self%20Hosted%20Runners/azuredevops-vmss/#spot","title":"Spot","text":"<p>Skip configuring Spot unless you chose to Run with Azure spot discount.</p>"},{"location":"Self%20Hosted%20Runners/azuredevops-vmss/#disks","title":"Disks","text":"<p>Leave Disks as default and go to the next page.</p>"},{"location":"Self%20Hosted%20Runners/azuredevops-vmss/#networking","title":"Networking","text":"<p>On the Networking page, you can choose between creating a new network or reuse an existing one. You can easily connect to a virtual network that is peered into a Azure Landing Zones solution and use private endpoints and stuff. Please be aware that the runners require internet connectivity in order to reach Azure DevOps.</p> <ul> <li>Load balancing options - Choose None, as Azure DevOps takes care of this</li> </ul> <p>The default settings will work just fine in most cases:</p> <p></p>"},{"location":"Self%20Hosted%20Runners/azuredevops-vmss/#scaling","title":"Scaling","text":"<p>For scaling, Azure DevOps will take care of everything. However, you should configure Initial instance count to 0, as we need to configure the VMSS for Azure DevOps connectivity before creating our instances.</p> <p></p>"},{"location":"Self%20Hosted%20Runners/azuredevops-vmss/#management-health-advanced-and-tags","title":"Management, Health, Advanced and Tags","text":"<p>No need to configure any of this. Just click next and complete the deployment of VMSS.</p> <p></p>"},{"location":"Self%20Hosted%20Runners/azuredevops-vmss/#final-configuration","title":"Final configuration","text":"<p>After successfully creating the VMSS instance, click Go to resource</p> <p></p> <p>Under Upgrade policy, switch from manual to Automatic.</p> <p></p>"},{"location":"Self%20Hosted%20Runners/azuredevops-vmss/#step-2-configuring-the-azure-devops-agent-pool","title":"Step 2 - Configuring the Azure DevOps Agent Pool","text":"<p>Now the the VMSS is up and running, we are ready to configure the Azure DevOps side of things. </p> <p>On the organization level (not while in a project), go to Organization settings</p> <p>Find Agent pools and click Add pools</p> <p></p> <p>Select Azure virtual machine scale set</p> <p></p> <p>Find you VMSS and name your pool:</p> <p></p> <p>Configure your preferred Pool options. We recommend having at least 1 agent on standby, though if cost is an issue, you can set it to 0 (you will have longer wait times for your first run due to provisioning the instance)</p> <p></p> <p>Click Create.</p> <p>You should now be ready to use the VMSS as runners. After configuring the DevOps side of things, you should see the following extension added to your VMSS:</p> <p></p>"},{"location":"Self%20Hosted%20Runners/azuredevops-vmss/#step-3-testing-the-self-hosted-runner","title":"Step 3 - Testing the self hosted runner","text":"<p>The following is an example pipeline using the pool we just created:</p> <pre><code>stages:\n  - stage: run\n    displayName: Run\n    jobs:\n      - job: run\n        displayName: Run\n        pool: SelfHostedRunnerUbuntu # Name of your VMSS pool\n        steps:\n          - task: PowerShell@2\n            name: Test\n            displayName: \"Test\"\n            inputs:\n              targetType: inline\n              pwsh: true\n              script: uname -a\n</code></pre> <p>After running the pipeline, you should see that an agent has come online:</p> <p></p> <p>And from the VMSS side of things, we can see that an instance has been created:</p> <p></p> <p>And of course, we can see that the pipeline is working just fine:</p> <p></p> <p>That's it, you now have an agent pool in Azure DevOps, that will automatically be updated whenever the Microsoft Hosted Runners are updated (through our image). Have fun!</p>"},{"location":"Self%20Hosted%20Runners/github-managedapp/","title":"GitHub self hosted runners - Managed application","text":"<p>This documentation shows you how to use our Azure Managed Application to create a GitHub Actions self hosted runner Virtual Machine Scale Set (VMSS).</p>"},{"location":"Self%20Hosted%20Runners/github-managedapp/#todo","title":"TODO","text":""},{"location":"Self%20Hosted%20Runners/github-vmss/","title":"Configuring GitHub self hosted runners using VMSS","text":"<p>Note: This guide is unfinished</p> <p>This documentation shows you how to configure an Azure Virtual Machine Scale Set (VMSS) with the latest Self Hosted Runner image, and configuring the VMSS instances to automatically register as self hosted runners in GitHub. Using a VMSS gives you the ability easily increase and decrease the number of active runners whenever you want, manually for now, but it is possible to automate. Additionally, the VMSS will always create instances based on the latest runner image published to the Azure Marketplace, so you will never need to worry about updating the operating system and toolkit - just like the hosted runners!</p> <p>To configure, you need to follow the three steps below:</p> <ol> <li>Configuring the Virtual Machine Scale Set</li> <li>Configuring the VMSS instances to automatically register to GitHub</li> <li>Testing the self hosted runner (Not really required)</li> </ol>"},{"location":"Self%20Hosted%20Runners/github-vmss/#step-1-configuring-the-virtual-machine-scale-set","title":"Step 1 - Configuring the Virtual Machine Scale Set","text":"<p>Note: If you do not want to handle the creation of the VMSS manually, you can use our Azure Managed Application instead.</p> <p>Start by going to the Azure Portal and click +Create a resource. </p> <p></p> <p>Search for Virtual Machine Scale Set, click on the result and click Create</p> <p></p>"},{"location":"Self%20Hosted%20Runners/github-vmss/#basics","title":"Basics","text":"<ul> <li>Project details<ul> <li>Subscription - A subscription you have contributor access to<ul> <li>Resource group - A new or existing resource group</li> </ul> </li> </ul> </li> <li>Scale set details<ul> <li>Virtual machine scale set name - The name of the scale set itself. Cannot be changed after deployment, but everything is stateless, so you can simply deploy a new scale set if needed.</li> <li>Region - The region where you want your runners to be located</li> <li>Availability zone - Configure to None in order to allow for a cluster with few running instances</li> </ul> </li> <li>Orchestration<ul> <li>Orchestration mode - Configure to Uniform, as we will be running only a single image and runner type</li> <li>Security type - Standard is the only supported for our image currently</li> </ul> </li> <li> <p>Instance details</p> <ul> <li>Image - Locate the Amesto Fortytwo Self Hosted Runner for GitHub image and select whether you want an Ubuntu or Windows based runner:</li> </ul> <p></p> <ul> <li>Run with Azure Spot discount - Only select this if you know how to handle spot, and if your pipelines can tolerate evictions</li> <li>Size - Choose the virtual machine size you want to run the runners as</li> <li>Administrator account</li> <li>Configure an administrator account for you virtual machines</li> </ul> </li> </ul> <p> </p>"},{"location":"Self%20Hosted%20Runners/github-vmss/#spot","title":"Spot","text":"<p>Skip configuring Spot unless you chose to Run with Azure spot discount.</p>"},{"location":"Self%20Hosted%20Runners/github-vmss/#disks","title":"Disks","text":"<p>Leave Disks as default and go to the next page.</p>"},{"location":"Self%20Hosted%20Runners/github-vmss/#networking","title":"Networking","text":"<p>On the Networking page, you can choose between creating a new network or reuse an existing one. You can easily connect to a virtual network that is peered into a Azure Landing Zones solution and use private endpoints and stuff. Please be aware that the runners require internet connectivity in order to reach GitHub.</p> <ul> <li>Load balancing options - Choose None, as GitHub takes care of this</li> </ul> <p>The default settings will work just fine in most cases:</p> <p></p>"},{"location":"Self%20Hosted%20Runners/github-vmss/#scaling","title":"Scaling","text":"<p>For scaling, GitHub will take care of everything. However, you should configure Initial instance count to 0, as we need to configure the VMSS for GitHub connectivity before creating our instances.</p> <p></p>"},{"location":"Self%20Hosted%20Runners/github-vmss/#management-health-advanced-and-tags","title":"Management, Health, Advanced and Tags","text":"<p>No need to configure any of this. Just click next and complete the deployment of VMSS.</p> <p></p>"},{"location":"Self%20Hosted%20Runners/github-vmss/#final-configuration","title":"Final configuration","text":"<p>After successfully creating the VMSS instance, click Go to resource</p> <p></p> <p>Under Upgrade policy, switch from manual to Automatic.</p> <p></p>"},{"location":"Self%20Hosted%20Runners/github-vmss/#step-2-configuring-the-vmss-instances-to-automatically-register-to-github","title":"Step 2 - Configuring the VMSS instances to automatically register to GitHub","text":"<p>Unfinished example - TODO by Marius og Ketil:</p>"},{"location":"Self%20Hosted%20Runners/github-vmss/#ubuntu","title":"Ubuntu","text":"<pre><code># Install\nmkdir actions-runner &amp;&amp; cd actions-runner\ncurl -o actions-runner-linux-x64.tar.gz -L https://github.com/actions/runner/releases/download/v2.309.0/actions-runner-linux-x64-2.309.0.tar.gz\necho \"2974243bab2a282349ac833475d241d5273605d3628f0685bd07fb5530f9bb1a  actions-runner-linux-x64.tar.gz\" | shasum -a 256 -c\ntar xzf ./actions-runner-linux-x64.tar.gz\n\n\n./config.sh --url https://github.com/XXX --token XXX --unattended\nsudo ./svc.sh install\nsudo ./svc.sh start\n</code></pre>"},{"location":"Self%20Hosted%20Runners/github-vmss/#windows","title":"Windows","text":""},{"location":"Self%20Hosted%20Runners/github-vmss/#step-3-example-of-using-the-self-hosted-runners","title":"Step 3 - Example of using the self hosted runners","text":"<p>The following is an example action using the pool we just created. It should be created with a name of <code>.github/workflows/test.yml</code>. Note the runs-on configured as self-hosted, which can be configured to require additional things, such as \"Linux\" and so on.</p> <pre><code>name: GitHub Actions Example\nrun-name: ${{ github.actor }} is testing out GitHub Actions \ud83d\ude80\non: [push]\njobs:\n  Explore-GitHub-Actions:\n    runs-on: self-hosted\n    steps:\n      - run: echo \"\ud83d\udc27 This job is now running on a ${{ runner.os }} server\"\n</code></pre> <p>After a commit, we should see this action running just fine:</p> <p></p> <p>That's it, you now have self hosted runners for GitHub up and running, that will automatically be updated whenever the hosted runners are updated (through our image). Have fun!</p>"},{"location":"Self%20Hosted%20Runners/github/","title":"Configuring GitHub self hosted runners","text":"<p>Moved here</p>"}]}